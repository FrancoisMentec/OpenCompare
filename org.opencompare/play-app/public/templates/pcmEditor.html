<!-- Jquery and boostrap not included in this file, have to import them for now, need a better solution -->
<!-- Yep ! For now, we deactive them because it affects the behaviour of other parts of the page (e.g. dropdown menus)
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>-->
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>-->

<div id="editor">

    <div class="modal fade" id="modalRemove" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Are you sure?</h4>
                </div>
                <div class="modal-body">
                    Removing the comparison matrix is definitive and cannot be undone. Please, confirm.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="remove()">Remove</button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="modalCancel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Are you sure?</h4>
                </div>
                <div class="modal-body">
                    Cancel edition will lose all unsaved changes
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="setEdit(false, true)">Yes</button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="modalNewFeature" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Create a new Feature</h4>
                </div>
                <div class="modal-body">
                    <label for="featureName">Feature name: </label>
                    <input ng-model="featureName" type="text" id="featureName">
                    <label for="featureType">Feature type: </label>
                    <select ng-model="featureType" name="featureType">
                        <option value="string" selected="selected">String</option>
                        <option value="number">Number</option>
                        <option value="boolean">Boolean</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="addFeature()">Create</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalRenameFeature" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Rename feature</h4>
                </div>
                <div class="modal-body">
                    <label for="featureName">Feature name: </label>
                    <input ng-model="featureName" type="text" id="featureName" value="{featureName}">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="renameFeature()">Rename</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalChangeType" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Change feature type</h4>
                </div>
                <div class="modal-body">
                    <label for="featureType">Feature type: </label>
                    <select ng-model="featureType">
                        <option value="string">String</option>
                        <option value="number">Number</option>
                        <option value="boolean">Boolean</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="changeType()">Change</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalSlider" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Filter</h4>
                </div>
                <div class="modal-body">
                    <div ui-slider="slider.options" ng-model="filterSlider"></div>
                    <p>{{filterSlider}}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal"  ng-click="closeFilter()">Apply</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalStringFilter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Filter</h4>
                </div>
                <div class="modal-body">
                    <div id="grid2" ui-grid="gridOptions2" ui-grid-selection ></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="closeFilter()">Apply</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Table editor -->
    <div ng-controller="ToolbarCtrl">
        <div class="row">
            <div class="col-xs-9">
                <h2 ng-show="!edit">{{pcm.name}}
                    <a role="button" class="btn btn-primary" ng-click="setEdit(true, true)"><i class="fa fa-pencil"></i> {{ 'edit' | translate }}</a>
                </h2>
                <form class="form-group" ng-show="edit">
                    <div class="form-group col-lg-5">
                        <label for="pcm-name" class="control-label">Title:</label>
                        <input id="pcm-name" class="form-control" type="text" ng-model="pcm.name" placeholder='Edit title'>
                    </div>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-9">
                <button ng-show="!saved && edit" role="button" class="btn btn-default" data-toggle="modal" data-target="#modalCancel"><i class="fa fa-undo"></i> Cancel</button>
                <button ng-show="saved && edit" role="button" class="btn btn-default" ng-click="setEdit(false, true)"><i class="fa fa-undo"></i> Cancel</button>
                <button ng-show="edit" role="button" class="btn btn-default" ng-class='{"btn btn-default": !saved, "btn btn-success": saved && isTitleSet}' ng-disabled="!isTitleSet" ng-click="save()"><i class="fa" ng-class='{"fa-save": !saved, "fa-check": saved && isTitleSet}'></i> Save</button>
                <button ng-show="edit" role="button" class="btn btn-default" ng-class='{"btn btn-warning": validating, "btn btn-default": !validating}' ng-click="validate()"><i class="fa" ng-class='{"fa-search": !validating, "fa-times": validating}'></i> Validate</button>
                <button ng-show="isInDatabase && edit" type="button" class="btn btn-danger" data-toggle="modal" data-target="#modalRemove"><i class="fa fa-trash"></i> Remove</button>
                <div class="btn-group">
                    <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="fa fa-download"></i> Export <span class="caret"></span></button>
                    <ul class="dropdown-menu">
                        <li><a href="#" ng-click="export('csv')" data-toggle="modal" data-target="#modalExport"> Export csv</a></li>
                        <li><a href="#" ng-click="export('wikitext')" data-toggle="modal" data-target="#modalExport"> Export wikipedia</a></li>
                    </ul>
                </div>
                &nbsp;&nbsp;
                <button ng-show="edit" role="button" class="btn btn-default" data-toggle="modal" data-target="#modalNewFeature"><i class="fa fa-plus"></i> Feature</button>
                <button ng-show="edit" role="button" class="btn btn-default" ng-click="addProduct()"><i class="fa fa-plus"></i> Product</button>
                <button ng-show="edit" role="button" class="btn btn-default" ng-click="undo()" ng-disabled="!canUndo"><i class="fa fa-undo"></i></button>
                <button ng-show="edit" role="button" class="btn btn-default" ng-click="redo()" ng-disabled="!canRedo"><i class="fa fa-repeat"></i></button>
            </div>
        </div>
    </div>

    <div id="matrix" class="grid" ui-grid="gridOptions"  ng-style="{'height' : height}"  ui-grid-selection ui-grid-edit ui-grid-cellNav ui-grid-resize-columns ui-grid-move-columns ui-grid-auto-resize>
        <div class="grid-overlay-msg" ng-hide="gridOptions.data.length && !loading">
            <div class="msg">
                <span class="loader"> Loading Data...</span>
            </div>
        </div>
    </div>

</div>