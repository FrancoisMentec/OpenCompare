@(id : String = null, data : play.api.libs.json.JsValue = null)

@header = {
    <link rel='stylesheet' href='@routes.Assets.at("stylesheets/editor.css")'>
}

@footer = {
    @if(id != null) {
        <script>
            var id = "@{Html(id)}";
        </script>
    }
    @if(data != null) {
        <script>
            var data = '@{Html(data.toString().replace("'","\\\'"))}';
        </script>
    }
    <script type='text/javascript' src='@routes.Assets.at("javascripts/kmf/pcm.min.js")'></script>
    <script type='text/javascript' src='@routes.Assets.at("javascripts/pcm-api.js")'></script>
    <script type='text/javascript' src='@routes.Assets.at("javascripts/controllers/pcm-editor-toolbar-controller.js")'></script>
    <script type='text/javascript' src='@routes.Assets.at("javascripts/controllers/pcm-editor-controller.js")'></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
}

@toolbar = {
    <nav class="navbar"  role="navigation" >
        <div class="container-fluid">

            <div class="editor-toolbar" ng-controller="PCMEditorToolbarController">
                <h2 ng-show="!edit" id="pcm-name">{{pcmName}}&nbsp;<a role="button" class="btn btn-primary" ng-click="setEdit(true)"><i class="fa fa-pencil"></i> @Messages("view.button.edit")</a></h2>
                <button ng-show="edit && !saved" role="button" class="btn btn-default" data-toggle="modal" data-target="#modalCancel"><i class="fa fa-undo"></i> Cancel</button>
                <button ng-show="edit && saved" role="button" class="btn btn-default" ng-click="setEdit(false)"><i class="fa fa-undo"></i> Cancel</button>
                <button ng-show="edit" role="button" class="btn btn-default" ng-class='{"btn btn-default": !saved, "btn btn-success": saved && isTitleSet}' ng-disabled="!isTitleSet" ng-click="save()"><i class="fa" ng-class='{"fa-save": !saved, "fa-check": saved && isTitleSet}'></i> Save</button>
                <button ng-show="edit" role="button" class="btn btn-default" ng-class='{"btn btn-warning": validating, "btn btn-default": !validating}' ng-click="validate()"><i class="fa" ng-class='{"fa-search": !validating, "fa-times": validating}'></i> Validate</button>
                <button ng-show="edit" type="button" class="btn btn-danger" data-toggle="modal" data-target="#modalRemove"><i class="fa fa-trash"></i> Remove</button>
                <div class="btn-group" ng-show="edit" ng-class='{open: open}'>
                    <button class="btn dropdown-toggle" data-toggle="dropdown" ng-click='open=!open'><i class="fa fa-download"></i> @Messages("navbar.export") <span class="caret"></span></button>
                    <ul class="dropdown-menu">
                        <li><a href="#" ng-click="export('csv')" data-toggle="modal" data-target="#modalExport">@Messages("navbar.export.csv")</a></li>
                        <li><a href="#" ng-click="export('wikitext')" data-toggle="modal" data-target="#modalExport">@Messages("navbar.export.wikipedia")</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
}

@main(header, footer, toolbar) {
<div>
    <div open-compare-editor ng-controller="PCMEditorController">
    </div>
</div>
}

